$(document).ready(function(){let e=$("#playground");assert(e.length,"Could not find #playground element.");let t=$("#solve-bk");assert(t.length,"Could not find #btn_bk element.");let n=$("#solve-wt");assert(n.length,"Could not find #btn_wt element.");let l=$("#response");function o(e){l.text(e)}assert(l.length,"Could not find #response element.");let r=null;function f(t=!1){if(null===r)return;let n=r;t&&(n=r.slice()).reverse();let l=function t(){let n="",l=getStarsClassMap();for(let r of e.children()){let f=$(r);if(f.hasClass(l.bk))n+="0";else if(f.hasClass(l.wt))n+="1";else throw o("Доска сломалась :("),Error("Unexpected element: "+f)}return parseInt(n,2)}();if(l>n.length){o("Не удалось найти решение :(");return}let f=n[l];if(0===f){o("Уже решено :)");return}let i=[];for(let u of f.toString())i.push(u);o(i.join("-"))}fetch("data.bin").then(e=>{if(!e.ok){o("Не удалось загрузить данные :(");return}e.blob().then(e=>e.arrayBuffer()).then(e=>{(r=Array.from(new Uint32Array(e))).unshift(0),o("Решение будет выведено здесь.")})}),t.on("click",()=>f()),n.on("click",()=>f(!0))});